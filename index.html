<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download CV TANDAN ES SEGA</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; background: #f5f5f5; min-height: 100vh; padding: 40px 20px; }
        .container { background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 8px; font-size: 24px; text-align: center; }
        .subtitle { color: #666; margin-bottom: 30px; text-align: center; }
        h2 { color: #333; font-size: 16px; margin-bottom: 16px; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .file-list { list-style: none; }
        .file-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
        .file-item:last-child { border-bottom: none; }
        .file-info { flex: 1; }
        .file-name { color: #333; font-weight: 500; font-size: 14px; }
        .file-meta { color: #999; font-size: 12px; margin-top: 4px; }
        .btn { display: inline-block; background: #2563eb; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 13px; font-weight: 500; transition: background 0.2s; }
        .btn:hover { background: #1d4ed8; }
        .loading { color: #999; text-align: center; padding: 20px; }
        .empty { color: #999; text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>CV TANDAN ES SEGA</h1>
        <p class="subtitle">Aplikasi Desktop untuk Windows</p>
        
        <h2>Available Downloads</h2>
        <ul class="file-list" id="file-list">
            <li class="loading">Loading...</li>
        </ul>
    </div>

    <script>
        async function loadFiles() {
            const list = document.getElementById('file-list');
            try {
                const response = await fetch('./releases/');
                const html = await response.text();
                
                // Parse HTML to find .exe links
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const links = [...doc.querySelectorAll('a')]
                    .map(a => a.getAttribute('href'))
                    .filter(href => href && href.endsWith('.exe'))
                    .map(href => href.split('/').pop());
                
                if (links.length === 0) {
                    list.innerHTML = '<li class="empty">No releases available yet</li>';
                    return;
                }
                
                // Sort by version (newest first)
                links.sort((a, b) => {
                    const vA = a.match(/(\d+)\.(\d+)\.(\d+)/);
                    const vB = b.match(/(\d+)\.(\d+)\.(\d+)/);
                    if (vA && vB) {
                        for (let i = 1; i <= 3; i++) {
                            if (parseInt(vB[i]) !== parseInt(vA[i])) {
                                return parseInt(vB[i]) - parseInt(vA[i]);
                            }
                        }
                    }
                    return b.localeCompare(a);
                });
                
                // Render file list
                list.innerHTML = links.map(filename => {
                    const version = filename.match(/(\d+\.\d+\.\d+)/)?.[1] || 'unknown';
                    return `
                        <li class="file-item">
                            <div class="file-info">
                                <div class="file-name">Version ${version}</div>
                                <div class="file-meta">${filename}</div>
                            </div>
                            <a href="./releases/${filename}" class="btn">Download</a>
                        </li>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Error loading files:', error);
                list.innerHTML = '<li class="empty">Failed to load releases</li>';
            }
        }
        
        loadFiles();
    </script>
</body>
</html>
